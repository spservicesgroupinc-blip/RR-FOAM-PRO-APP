@tailwind base;
@tailwind components;
@tailwind utilities;

/* Stroke counter flash animation */
@keyframes ping-once {
  0% { opacity: 0.5; transform: scale(1); }
  100% { opacity: 0; transform: scale(1.05); }
}
.animate-ping-once {
  animation: ping-once 0.3s ease-out forwards;
}

/* Slow pulse for over-budget warning */
@keyframes pulse-slow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}
.animate-pulse-slow {
  animation: pulse-slow 2s ease-in-out infinite;
}

/* ═══════════════════════════════════════════════
   CREW DASHBOARD — LANDSCAPE TABLET LAYOUT
   Targets tablets in landscape orientation so all
   content fits without scrolling.
   ═══════════════════════════════════════════════ */
@media (orientation: landscape) and (min-width: 768px) and (max-height: 1100px) {
  /* Root container: lock to viewport, no scroll */
  .crew-detail-root {
    height: 100dvh !important;
    min-height: unset !important;
    overflow: hidden !important;
    padding-bottom: 0 !important;
  }

  /* Compact sticky header bar */
  .crew-header-bar {
    padding-top: 0.25rem !important;
    padding-bottom: 0.25rem !important;
  }

  /* Compact timer bar */
  .crew-timer-bar {
    padding-top: 0.25rem !important;
    padding-bottom: 0.25rem !important;
  }
  .crew-timer-bar .text-2xl {
    font-size: 1.25rem !important;
    line-height: 1.5rem !important;
  }

  /* Main content: side-by-side columns filling remaining height */
  .crew-detail-content {
    display: flex !important;
    flex-direction: row !important;
    gap: 0.5rem !important;
    padding: 0.5rem !important;
    max-width: none !important;
    overflow: hidden !important;
    /* Fill remaining viewport below sticky header + timer bar (~90px) */
    height: calc(100dvh - 90px) !important;
  }
  .crew-detail-content > * {
    /* Remove vertical gap from space-y-3 in flex row mode */
    margin-top: 0 !important;
  }

  /* Left panel: Stroke counter */
  .crew-stroke-panel {
    width: 50% !important;
    flex-shrink: 0 !important;
    overflow-y: auto !important;
    max-height: 100% !important;
    padding: 0.5rem !important;
  }

  /* Right panel: Job info cards */
  .crew-info-panel {
    width: 50% !important;
    overflow-y: auto !important;
    max-height: 100% !important;
    display: flex !important;
    flex-direction: column !important;
    gap: 0.375rem !important;
  }
  /* When stroke panel is NOT present (timer off), info takes full width */
  .crew-info-panel.crew-info-full {
    width: 100% !important;
    flex-direction: row !important;
    flex-wrap: wrap !important;
  }
  .crew-info-panel.crew-info-full > * {
    flex: 1 1 48% !important;
    min-width: 280px !important;
  }

  /* Compact stroke counter elements */
  .crew-stroke-panel .stroke-counter-value {
    font-size: 3rem !important;
    line-height: 1 !important;
  }
  .crew-stroke-panel .stroke-counter-box {
    padding: 1rem 0.75rem !important;
  }
  .crew-stroke-panel .stroke-progress-section {
    margin-top: 0.5rem !important;
  }
  .crew-stroke-panel .stroke-progress-section .space-y-2 > * + * {
    margin-top: 0.25rem !important;
  }
  /* Hide verbose BT instructions in landscape */
  .crew-stroke-panel .bt-instructions {
    display: none !important;
  }
  /* Compact BT debug log */
  .crew-stroke-panel .bt-debug-log {
    max-height: 2.5rem !important;
  }
  /* Compact estimate target bar */
  .crew-stroke-panel .estimate-target-bar {
    padding: 0.375rem 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  /* Compact warning banners */
  .crew-stroke-panel .over-budget-banner {
    padding: 0.375rem 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  .crew-stroke-panel .over-budget-banner .grid {
    gap: 0.375rem !important;
  }
  .crew-stroke-panel .over-budget-banner .text-2xl {
    font-size: 1.25rem !important;
  }
  .crew-stroke-panel .near-budget-banner {
    padding: 0.375rem 0.5rem !important;
    margin-bottom: 0.5rem !important;
  }
  .crew-stroke-panel .inactive-type-summary {
    margin-top: 0.375rem !important;
    padding: 0.375rem 0.5rem !important;
  }

  /* Info panel cards: compact padding */
  .crew-info-panel .info-card {
    padding: 0.5rem 0.625rem !important;
  }
  .crew-info-panel .info-card h3 {
    margin-bottom: 0.375rem !important;
    font-size: 0.625rem !important;
  }
  .crew-info-panel .info-card .text-xl {
    font-size: 0.875rem !important;
  }

  /* Compact job list for landscape */
  .crew-list-root {
    height: 100dvh !important;
    min-height: unset !important;
    overflow: hidden !important;
    padding-bottom: 0 !important;
  }
  .crew-list-content {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.5rem !important;
    overflow-y: auto !important;
    max-height: calc(100dvh - 120px) !important;
    max-width: none !important;
  }
  .crew-list-content > * {
    margin-top: 0 !important;
  }
}

/* Utility: scrollbar styling for landscape panels */
.crew-stroke-panel::-webkit-scrollbar,
.crew-info-panel::-webkit-scrollbar {
  width: 4px;
}
.crew-stroke-panel::-webkit-scrollbar-thumb,
.crew-info-panel::-webkit-scrollbar-thumb {
  background: #374151;
  border-radius: 2px;
}
.crew-stroke-panel::-webkit-scrollbar-track,
.crew-info-panel::-webkit-scrollbar-track {
  background: transparent;
}
